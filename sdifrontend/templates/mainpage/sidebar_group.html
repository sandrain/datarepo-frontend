<div id="sidebar-group-{{group.id}}">
  <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
    <span>{{ group.name }}</span>
  </h6>
  <div id="sidebar-group-items-{{group.id}}">
    {% for item in group.items|slice:":10" %}
    {% include "mainpage/sidebar_item.html" with item=item %}
    {% endfor %}
    <li class="nav-item">
      <span class="nav-link">
        <div id="more-{{group.id}}"><i class="fas fa-ellipsis-v"></i>More</div>
      </span>
    </li>
  </div>
</div>

<script>

  function close_{{ group.id }}(){

    var html_to_replace = `
  {% for item in group.items|slice:":10" %}
    {% include "mainpage/sidebar_item.html" with item=item category=forloop.counter0 %}
  {% endfor %}
    <li class="nav-item">
        <span class="nav-link"><div id="more-{{group.id}}"><i class="fas fa-ellipsis-v"></i>More</div></span>
    </li>`

    $("#sidebar-group-items-{{group.id}}").html(html_to_replace);


    $("#more-{{group.id}}").click(function () {

      var html_to_replace = `
{% for item in group.items %}
  {% include "mainpage/sidebar_item.html" with item=item category=forloop.counter0 %}
{% endfor %}
  <li class="nav-item">
      <span class="nav-link"><div id="close-{{group.id}}"><i class="fas fa-ellipsis-v"></i>Close</div></span>
  </li>`

      $("#sidebar-group-items-{{group.id}}").html(html_to_replace);

      $('#close-{{group.id}}').hover(function () {
        $(this).css('cursor', 'pointer');
      });

      $('#close-{{group.id}}').click(function () {
        $(this).css('cursor', 'pointer');
      });

      $("#close-{{group.id}}").click(function () {
        close_{{ group.id}}();
      });


    });

    $('#more-{{group.id}}').hover(function () {
    $(this).css('cursor', 'pointer');
  });


  };

  $("#more-{{group.id}}").click(function () {

    var html_to_replace = `
  {% for item in group.items %}
    {% include "mainpage/sidebar_item.html" with item=item category=forloop.counter0 %}
  {% endfor %}
    <li class="nav-item">
        <span class="nav-link"><div id="close-{{group.id}}"><i class="fas fa-ellipsis-v"></i>Close</div></span>
    </li>`

    $("#sidebar-group-items-{{group.id}}").html(html_to_replace);

    $('#close-{{group.id}}').hover(function () {
      $(this).css('cursor', 'pointer');
    });

    $('#close-{{group.id}}').click(function () {
      $(this).css('cursor', 'pointer');
    });

    $("#close-{{group.id}}").click(function () {
      close_{{ group.id}}();
    });


  });

  $('#more-{{group.id}}').hover(function () {
    $(this).css('cursor', 'pointer');
  });

</script>